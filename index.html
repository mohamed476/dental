<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Curso + My Goal</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f8f9fa;--card:#ffffff;--accent:#dc3545;--muted:#6c757d;--success:#198754;--warning:#ffc107;--danger:#dc3545;--energy:#c82333;
      font-family: "Poppins", sans-serif;
    }
    body{margin:0;background:linear-gradient(180deg,#f8f9fa, #fff);display:flex;flex-direction:column;align-items:center;min-height:100vh;color:#212529}
  
    /* TIMER ROMÁNTICO */
    .timer-banner{
      width:100%;background:linear-gradient(135deg,#dc3545,#e74c3c);color:white;padding:22px 0;text-align:center;font-weight:900;
      font-size:38px;letter-spacing:2px;box-shadow:0 8px 25px rgba(220,53,69,0.35);z-index:10;
    }
    .timer-banner .countdown{display:flex;justify-content:center;gap:22px;flex-wrap:wrap;margin-top:12px}
    .timer-banner .block{background:rgba(255,255,255,0.18);padding:14px 22px;border-radius:14px;min-width:110px;border:1px solid rgba(255,255,255,0.25)}
    .timer-banner .num{font-size:52px;line-height:1;font-weight:900}
    .timer-banner .label{font-size:17px;text-transform:uppercase;letter-spacing:1.2px;margin-top:6px}
    .timer-banner .footer{font-size:20px;font-weight:600;margin-top:10px;opacity:0.95}
    .wrap{width:960px;max-width:96%;background:var(--card);border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,0.08);overflow:hidden;margin:20px 0}
    header{padding:22px 28px;background:linear-gradient(90deg,rgba(220,53,69,0.12),rgba(220,53,69,0.04));display:flex;flex-direction:column;align-items:flex-start;gap:8px}
    header h1{margin:0;font-size:22px;color:#111}
    .date{font-size:18px;color:var(--accent);font-weight:bold;align-self:flex-end}
    .motivation{font-size:15px;color:#444;margin-top:6px;line-height:1.4}

    .course-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;padding:20px}
    .card{background:#fff;padding:18px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.05);margin-bottom:14px}
    .section-title{font-size:17px;font-weight:700;margin:0 0 12px;color:var(--accent)}
    .word-list{display:flex;flex-direction:column;gap:10px}
    .word-item{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:10px;border:1px solid #f5c6cb}
    .big{font-weight:700;font-size:18px}
    .small{font-size:13px;color:var(--muted)}
    .verb-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .verb-card{background:#fff5f5;padding:12px;border-radius:10px;border:1px solid #f5c6cb;text-align:center}
    .btn-sm{font-size:12px;padding:6px 10px;background:var(--accent);color:white;border:none;border-radius:8px;cursor:pointer;margin:4px}
    .btn-sm:hover{transform:scale(1.05)}
    .game-area{background:#ffeaea;padding:16px;border-radius:12px;margin-top:12px;border:1px dashed var(--accent)}
    .sentence-builder{display:flex;flex-wrap:wrap;gap:8px;margin:12px 0}
    .word-chip{background:#fff;padding:8px 14px;border-radius:20px;border:1px solid #f5c6cb;font-size:15px;cursor:grab;box-shadow:0 1px 3px rgba(0,0,0,0.1);user-select:none}
    .word-chip:hover{transform:scale(1.07);border-color:var(--accent)}
    .drop-zone{min-height:60px;border:2px dashed #ccc;border-radius:12px;padding:12px;display:flex;flex-wrap:wrap;gap:8px;background:#fff}
    .drop-zone.drag-over{border-color:var(--accent);background:#ffeaea}
    .result{margin-top:14px;font-weight:700;font-size:16px}

    /* BOTÓN MY GOAL */
    .goal-btn{
      position: fixed; bottom: 20px; right: 20px; background: #ff6b6b; color: white; border: none;
      font-size: 1.1rem; padding: 14px 20px; border-radius: 50px; cursor: pointer; box-shadow: 0 6px 15px rgba(255,107,107,0.4);
      z-index: 100; transition: all 0.3s ease; font-weight: 600;
    }
    .goal-btn:hover{transform: translateY(-3px); box-shadow: 0 8px 20px rgba(255,107,107,0.5);}

    /* MODAL SNUS TRACKER */
    .modal{display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6);
      justify-content: center; align-items: center; z-index: 200; backdrop-filter: blur(8px);}
    .modal-content{
      background: linear-gradient(135deg, #7bdff2, #b2f7ef, #eff7f6); padding: 30px; border-radius: 20px;
      text-align: center; max-width: 400px; width: 90%; box-shadow: 0 15px 40px rgba(0,0,0,0.2);
      animation: popIn 0.4s ease; position: relative;
    }
    @keyframes popIn{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}
    .modal h2{font-size: 2rem; margin: 0 0 10px;}
    .modal .counter{font-size: 5rem; font-weight: bold; color: #ff6b6b; margin: 15px 0;}
    .modal button{background: #ff6b6b; border: none; color: white; font-size: 1.1rem; padding: 12px 24px; border-radius: 50px;
      cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: 0.2s ease;}
    .modal button:hover{transform: scale(1.05); background: #ff8787;}
    .modal .close-btn{position: absolute; top: 15px; right: 20px; font-size: 28px; cursor: pointer; color: #555;}
    .modal .message{margin-top: 12px; font-size: 1rem; color: #444;}
    .modal .emoji{font-size: 2.5rem; margin-top: 10px;}

    @media(max-width:800px){
      .timer-banner{font-size:26px}
      .timer-banner .num{font-size:38px}
      .course-grid{grid-template-columns:1fr}
      .verb-grid{grid-template-columns:1fr 1fr}
    }
  </style>
</head>
<body>

  <!-- TIMER ROMÁNTICO -->
  <div class="timer-banner">
    <div>FALTAN PARA VERTE</div>
    <div class="countdown">
      <div class="block"><div class="num" id="days">00</div><div class="label">días</div></div>
      <div class="block"><div class="num" id="hours">00</div><div class="label">horas</div></div>
      <div class="block"><div class="num" id="minutes">00</div><div class="label">minutos</div></div>
      <div class="block"><div class="num" id="seconds">00</div><div class="label">segundos</div></div>
    </div>
    <div class="footer">28/12/2025 • 10:30 AM • Barcelona</div>
  </div>

  <button class="goal-btn" id="openGoal">My Goal</button>

  <!-- MODAL SNUS TRACKER – AHORA MÁXIMO 14 -->
  <div class="modal" id="snusModal">
    <div class="modal-content">
      <span class="close-btn" id="closeModal">×</span>
      <h2>Daily Snus Tracker</h2>
      <p>Goal: máximo 14 snus al día</p>
      <div class="counter" id="snusCounter">14</div>
      <button id="useSnus">Used one</button>
      <div class="message" id="snusMessage"></div>
      <div class="emoji" id="snusEmoji">Relajado</div>
    </div>
  </div>

  <div class="wrap">
    <header>
      <h1>Curso del día — ¡Nivel 9: Verbos Poderosos!</h1>
      <div class="date" id="todayDate"></div>
      <p class="motivation">¡Silje, hoy dominas los verbos más usados en Barcelona!</p>
    </header>

    <div class="course-grid">
      <!-- 12 VERBOS IMPORTANTES -->
      <div>
        <div class="card">
          <h3 class="section-title">12 verbos que necesitas YA</h3>
          <div class="verb-grid">
            <div class="verb-card"><div class="big">poder</div><div class="small">puedo • puedes • puede</div></div>
            <div class="verb-card"><div class="big">tener</div><div class="small">tengo • tienes • tiene</div></div>
            <div class="verb-card"><div class="big">hacer</div><div class="small">hago • haces • hace</div></div>
            <div class="verb-card"><div class="big">decir</div><div class="small">digo • dices • dice</div></div>
            <div class="verb-card"><div class="big">saber</div><div class="small">sé • sabes • sabe</div></div>
            <div class="verb-card"><div class="big">poner</div><div class="small">pongo • pones • pone</div></div>
            <div class="verb-card"><div class="big">salir</div><div class="small">salgo • sales • sale</div></div>
            <div class="verb-card"><div class="big">traer</div><div class="small">traigo • traes • trae</div></div>
            <div class="verb-card"><div class="big">ver</div><div class="small">veo • ves • ve</div></div>
            <div class="verb-card"><div class="big">dar</div><div class="small">doy • das • da</div></div>
            <div class="verb-card"><div class="big">conocer</div><div class="small">conozco • conoces • conoce</div></div>
            <div class="verb-card"><div class="big">vivir</div><div class="small">vivo • vives • vive</div></div>
          </div>
        </div>

        <div class="card">
          <h3 class="section-title">Construye la frase</h3>
          <div class="game-area">
            <p><strong>Arrastra → "No puedo vivir sin ti"</strong></p>
            <div class="sentence-builder" id="wordPool"></div>
            <div class="drop-zone" id="sentenceDrop"></div>
            <div class="result" id="sentenceResult"></div>
            <button class="btn-sm" id="checkSentence">Comprobar</button>
          </div>
        </div>
      </div>

      <div>
        <div class="card">
          <h3 class="section-title">Vocabulario útil</h3>
          <div class="word-list">
            <div class="word-item"><div class="big">sol</div><div class="small">sun</div></div>
            <div class="word-item"><div class="big">calle</div><div class="small">street</div></div>
            <div class="word-item"><div class="big">tiempo</div><div class="small">time / weather</div></div>
            <div class="word-item"><div class="big">dinero</div><div class="small">money</div></div>
            <div class="word-item"><div class="big">casa</div><div class="small">home</div></div>
            <div class="word-item"><div class="big">amigo/a</div><div class="small">friend</div></div>
          </div>
        </div>

        <div class="card">
          <h3 class="section-title">Diálogo del día</h3>
          <div class="game-area">
            <p><strong>— ¿_____ hablar español?</strong></p>
            <button class="btn-sm" onclick="res(1,'Puedes')">Puedes</button>
            <button class="btn-sm" onclick="res(1,'Tienes')">Tienes</button>

            <p style="margin-top:16px"><strong>— Sí, pero no _____ mucho.</strong></p>
            <button class="btn-sm" onclick="res(2,'sé')">sé</button>
            <button class="btn-sm" onclick="res(2,'puedo')">puedo</button>

            <div class="result" id="dialogResult"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // FECHA
    document.getElementById('todayDate').textContent = new Date().toLocaleDateString('es-ES', {weekday:'long', day:'numeric', month:'long'});

    // TIMER
    const targetDate = new Date('2025-12-28T10:30:00');
    function updateTimer() {
      const now = new Date();
      const diff = targetDate - now;
      if (diff <= 0) {
        document.querySelector('.timer-banner').innerHTML = `<div style="font-size:36px">¡YA ESTOY AQUÍ, SILJE!</div>`;
        return;
      }
      const days = Math.floor(diff / (1000*60*60*24));
      const hours = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
      const minutes = Math.floor((diff % (1000*60*60)) / (1000*60));
      const seconds = Math.floor((diff % (1000*60)) / 1000);
      document.getElementById('days').textContent = String(days).padStart(2,'0');
      document.getElementById('hours').textContent = String(hours).padStart(2,'0');
      document.getElementById('minutes').textContent = String(minutes).padStart(2,'0');
      document.getElementById('seconds').textContent = String(seconds).padStart(2,'0');
    }
    setInterval(updateTimer, 1000);
    updateTimer();

    // SNUS TRACKER – MÁXIMO 14 (CORREGIDO 100%)
    const modal = document.getElementById('snusModal');
    const openBtn = document.getElementById('openGoal');
    const closeBtn = document.getElementById('closeModal');
    const snusCounter = document.getElementById('snusCounter');
    const snusMessage = document.getElementById('snusMessage');
    const snusEmoji = document.getElementById('snusEmoji');
    const useBtn = document.getElementById('useSnus');
    let snusCount = 14;                 // ← 14 desde el principio
    const today = new Date().toDateString();

    if (localStorage.getItem("snusDate") === today) {
      snusCount = parseInt(localStorage.getItem("snusCount")) || 14;
    } else {
      localStorage.setItem("snusDate", today);
      localStorage.setItem("snusCount", 14);   // ← siempre guarda 14 al empezar el día
    }
    snusCounter.textContent = snusCount;

    openBtn.onclick = () => { modal.style.display = "flex"; updateSnusUI(); };
    closeBtn.onclick = () => modal.style.display = "none";
    window.onclick = e => { if (e.target === modal) modal.style.display = "none"; };

    useBtn.onclick = () => {
      if (snusCount > 0) {
        snusCount--;
        snusCounter.textContent = snusCount;
        localStorage.setItem("snusCount", snusCount);
        updateSnusUI();
      }
    };

    function updateSnusUI() {
      if (snusCount === 0) {
        snusMessage.textContent = "¡Perfecta! 0 snus hoy";
        snusEmoji.textContent = "Fuego";
      } else if (snusCount <= 4) {
        snusMessage.textContent = "Casi... ¡tú puedes!";
        snusEmoji.textContent = "Mirando";
      } else {
        snusMessage.textContent = "Vas súper bien";
        snusEmoji.textContent = "Relajado";
      }
    }

    // JUEGO FRASE + DIÁLOGO (todo igual, funciona perfecto)
    const words = ["No", "puedo", "vivir", "sin", "ti"];
    const correctOrder = ["No", "puedo", "vivir", "sin", "ti"];
    const pool = document.getElementById('wordPool');
    const drop = document.getElementById('sentenceDrop');
    const result = document.getElementById('sentenceResult');
    const checkBtn = document.getElementById('checkSentence');

    function loadGame() {
      pool.innerHTML = ''; drop.innerHTML = '';
      const shuffled = [...words].sort(() => Math.random() - 0.5);
      shuffled.forEach(w => {
        const chip = document.createElement('div');
        chip.className = 'word-chip';
        chip.textContent = w;
        chip.draggable = true;
        chip.ondragstart = e => e.dataTransfer.setData('text', w);
        chip.onclick = () => { if (!drop.contains(chip)) drop.appendChild(chip); };
        pool.appendChild(chip);
      });
      drop.ondragover = e => { e.preventDefault(); drop.classList.add('drag-over'); };
      drop.ondragleave = () => drop.classList.remove('drag-over');
      drop.ondrop = e => {
        e.preventDefault(); drop.classList.remove('drag-over');
        const word = e.dataTransfer.getData('text');
        if (word) {
          const chip = document.createElement('div');
          chip.className = 'word-chip';
          chip.textContent = word;
          chip.onclick = () => chip.remove();
          drop.appendChild(chip);
        }
      };
    }

    checkBtn.onclick = () => {
      const current = Array.from(drop.children).map(c => c.textContent);
      if (current.length !== correctOrder.length) {
        result.textContent = "Falta alguna palabra...";
        result.style.color = 'var(--danger)';
        return;
      }
      if (JSON.stringify(current) === JSON.stringify(correctOrder)) {
        result.innerHTML = "¡Perfecto! Te echo de menos...";
        result.style.color = 'var(--success)';
      } else {
        result.textContent = "Casi... vuelve a intentarlo";
        result.style.color = 'var(--warning)';
      }
    };

    let correctas = 0;
    function res(q, texto) {
      if (q===1 && texto==="Puedes") correctas++;
      if (q===2 && texto==="sé") correctas++;
      if (correctas === 2) {
        document.getElementById('dialogResult').innerHTML = "¡Increíble! +3 puntos";
        document.getElementById('dialogResult').style.color = 'var(--success)';
      }
    }

    loadGame();
  </script>
</body>
</html>
